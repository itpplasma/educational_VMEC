<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VMEC: Educational VMEC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
<script>
window.MathJax = {
  loader: {
    load: ['[tex]/color', '[tex]/cancel']
  },
  tex: {
      tags: "ams",
      packages: {'[+]': ['noerrors'],
                 '[+]': ['color'],
                 '[+]': ['verb'],
                 '[+]': ['cancel']
      }
      macros: { bm: ["{\\boldsymbol #1}",1]
      }
  }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" id="MathJax-script"></script>
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.0.0/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">VMEC<span id="projectnumber">&#160;8.52</span>
   </div>
   <div id="projectbrief">3D Equilibrium solver with nested flux surfaces.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Educational VMEC </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a> This is a heavily stripped-down version of the serial implementation of VMEC 8.52. It is forked from the <code>v251</code> branch of the <a href="https://github.com/PrincetonUniversity/STELLOPT">STELLOPT</a> repository.</p>
<p >The goal of this project is to have a version of VMEC which only computes the Stellarator MHD equilibrium and nothing more.</p>
<p >The <code>cmake</code> build system for stand-alone VMEC is borrowed from <a href="https://github.com/hiddenSymmetries/VMEC2000">hiddenSymmetries/VMEC2000</a> and from <a href="https://github.com/ORNL-Fusion/LIBSTELL">ORNL-Fusion/LIBSTELL</a>.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Building</h1>
<p >This is a fairly standard CMake setup, if you are used to it. Here is how it works:</p><ul>
<li>Create a directory <code>build</code> in the main folder: <code>mkdir build</code></li>
<li>Go into the <code>build</code> directory: <code>cd build</code></li>
<li>Run CMake: <code>cmake ..</code></li>
<li>Execute the actual build process: <code>make</code> (optional multi-threaded build: <code>make -j</code>)</li>
<li>The VMEC executable <code>xvmec</code> is then located in <code>build/bin</code> with respect to the main folder.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Example Execution</h1>
<ul>
<li>Change into the <code>test</code> dir: <code>cd test</code></li>
<li>Run the <a href="https://princetonuniversity.github.io/FOCUS/notes/Coil_design_codes_benchmark.html#Equiblirium--">Solov'ev test case</a>: <code>../build/bin/xvmec input.solovev</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
External NESTOR</h1>
<p >The free-boundary part of VMEC is the Neumann Solver for Toroidal Systems (NESTOR). Its source code is in a separate folder <a href="src/NESTOR"><code>NESTOR</code></a>. The appropriate reference is <a href="https://doi.org/10.1016/0021-9991(86)90055-0">https://doi.org/10.1016/0021-9991(86)90055-0</a> .</p>
<p >This version of NESTOR can be run stand-alone. It reads its inputs from a netCDF file and writes its outputs into another netCDF file. The main executable of this stand-alone version of NESTOR is <a href="src/NESTOR/nestor_main.f90"><code>nestor_main.f90</code></a>. The input and output files are read and written in <a href="src/NESTOR/data/nestor_io.f90"><code>nestor_io.f90</code></a>.</p>
<p >This version of VMEC can be configured to dump the corresponding input and output files, but still run the compiled-in version of NESTOR. This is enabled via the logical flag <code>ldump_vacuum_ref</code> in <a href="src/funct3d.f90"><code>funct3d.f90</code></a>.</p>
<p >Also, an external NESTOR implementation can be called instead of using the compiled-in version of NESTOR. This is enabled via the logical flag <code>lexternal_nestor</code> in <a href="src/funct3d.f90"><code>funct3d.f90</code></a>. The corresponding system call to execute the external NESTOR implementation has to be specified in <code>nestor_executable</code> in <a href="src/funct3d.f90"><code>funct3d.f90</code></a>.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Angle Constraint</h1>
<p >The poloidal angle-like coordinate is a priori not uniquely defined and needs special care. The version of VMEC from the STELLOPT repo had essentially two options for this. They were alternatively compiled in via the preprocessor flag <code>_HBANGLE</code>.</p>
<ol type="1">
<li>The Hirshman-Breslau explicit spectrally optimized Fourier series (see <a href="https://doi.org/10.1063/1.872954">https://doi.org/10.1063/1.872954</a> for details) and</li>
<li>an unknown mixture of several constraints of the <code>m=1</code> Fourier coefficients (the logical <code>lconm1</code> is true for this constraint).</li>
</ol>
<p >By default, the <code>_HBANGLE</code> preprocessor flag is not active and thus, the "old" <code>m=1</code> constraint is active.</p>
<p >This version of VMEC has all preprocessor flags already expanded. It became clear that it is nevertheless useful to have at least a vague idea of what parts of the code are related to the angle constraint. Therefore, those parts of VMEC related to the <code>m=1</code>constraint are marked to start with</p>
<div class="fragment"><div class="line">! #ifndef _hbangle</div>
</div><!-- fragment --><p >and end with</p>
<div class="fragment"><div class="line">! #<span class="keyword">end </span>/* ndef _HBANGLE */</div>
</div><!-- fragment --><p >Note that the <a href="https://github.com/jonathanschilling/educational_VMEC/blob/master/vmec_info.md">original documentation</a> states: </p><blockquote class="doxtable">
<p >&zwj;THE POLOIDAL ANGLE IS DETERMINED BY MINIMIZING &lt;M&gt; = m**2 S(m) , WHERE S(m) = Rm**2 + Zm**2 . </p>
</blockquote>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 9 2022 14:45:04 for VMEC by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
